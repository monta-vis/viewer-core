/**
 * InstructionView Theme Styles
 *
 * Überschreibt die globalen CSS-Variablen lokal für die InstructionView.
 * Ermöglicht unabhängiges Theme-Switching (Editor kann Dark sein, InstructionView Light).
 *
 * Nutzt die gleichen Variablennamen wie index.css für Konsistenz.
 */

/* ============================================
   DARK THEME (Montavis Brand)
   ============================================ */

.instruction-theme-dark {
  color-scheme: dark;

  /* Background - Montavis Navy (configurable via --hue-bg / --saturation-bg) */
  --color-bg-base: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 11%);
  --color-bg-surface: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 15%);
  --color-bg-elevated: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 20%);

  /* Card backgrounds with subtle variation */
  --color-bg-card: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 18%);
  --color-bg-card-hover: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 22%);

  /* Text - High contrast for readability */
  --color-text-primary: hsl(0, 0%, 98%);
  --color-text-base: hsl(0, 0%, 98%);
  --color-text-muted: hsla(0, 0%, 98%, 0.7);
  --color-text-subtle: hsla(0, 0%, 98%, 0.5);

  /* Accent - Brand Color (from --hue-brand, --saturation-brand, --lightness-brand) */
  --color-secondary: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand, 50%));
  --color-secondary-hover: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-hover, 58%));
  --color-secondary-active: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-active, 42%));
  --color-text-secondary: hsl(var(--hue-brand), var(--saturation-brand), 60%);

  /* Borders - Subtle brand tint */
  --color-border-base: hsla(var(--hue-brand), 50%, 50%, 0.2);
  --color-border-muted: hsla(var(--hue-brand), 50%, 50%, 0.1);
  --color-border-strong: hsla(var(--hue-brand), 50%, 50%, 0.3);
  --color-border-accent: hsl(var(--hue-brand), var(--saturation-brand), 50%);

  /* Semantic Colors — intentionally hardcoded (decoupled from brand hue) */
  --color-success: hsl(142, 71%, 45%);
  --color-warning: hsl(45, 100%, 51%);
  --color-error: hsl(354, 70%, 54%);
  --color-info: hsl(210, 70%, 50%);

  /* Note Level Colors */
  --color-note-info-bg: hsla(210, 70%, 50%, 0.65);
  --color-note-info-border: hsl(210, 70%, 50%);
  --color-note-info-text: hsl(0, 0%, 100%);

  --color-note-warning-bg: hsla(45, 100%, 51%, 0.65);
  --color-note-warning-border: hsl(45, 100%, 51%);
  --color-note-warning-text: hsl(45, 100%, 70%);

  --color-note-critical-bg: hsla(354, 70%, 54%, 0.65);
  --color-note-critical-border: hsl(354, 70%, 54%);
  --color-note-critical-text: hsl(354, 70%, 70%);

  --color-note-quality-bg: hsla(142, 71%, 45%, 0.65);
  --color-note-quality-border: hsl(142, 71%, 45%);
  --color-note-quality-text: hsl(142, 71%, 65%);

  /* Shadows */
  --shadow-sm: 0 0.0625rem 0.125rem hsla(0, 0%, 0%, 0.3);
  --shadow-md: 0 0.25rem 0.375rem hsla(0, 0%, 0%, 0.4);
  --shadow-lg: 0 0.625rem 0.9375rem hsla(0, 0%, 0%, 0.5);

  /* Video Player */
  --color-video-controls-bg: hsla(var(--hue-bg, 210), var(--saturation-bg, 44%), 10%, 0.9);
  --color-video-progress-bg: hsla(0, 0%, 100%, 0.2);
  --color-video-progress-fill: hsl(var(--hue-brand), var(--saturation-brand), 50%);

  /* Item States (for buttons, cards) */
  --item-bg: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 18%);
  --item-bg-hover: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 26%);
  --item-bg-selected: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 30%);
  --item-bg-active: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 40%);

  /* Accent Item States - uses dynamic lightness variants from JS for adaptive direction */
  /* Fallbacks: 47%/55%/59%/65% for dark theme (lighter on hover) */
  --lightness-brand-hover: 55%;
  --lightness-brand-selected: 59%;
  --lightness-brand-active: 65%;
  --color-accent-text: hsl(var(--hue-bg, 210), var(--saturation-bg, 44%), 10%);  /* Dark text for accent buttons */

  --item-accent-bg: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand, 47%));
  --item-accent-bg-hover: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-hover));
  --item-accent-bg-selected: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-selected));
  --item-accent-bg-active: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-active));
}

/* ============================================
   LIGHT THEME (Werkstatt-optimiert)
   ============================================ */

.instruction-theme-light {
  color-scheme: light;

  /* Background - Bright for workshop visibility */
  --color-bg-base: hsl(210, 15%, 94%);
  --color-bg-surface: hsl(0, 0%, 100%);
  --color-bg-elevated: hsl(210, 15%, 98%);

  /* Card backgrounds */
  --color-bg-card: hsl(0, 0%, 100%);
  --color-bg-card-hover: hsl(210, 20%, 96%);

  /* Text - Dark for readability */
  --color-text-primary: hsl(210, 44%, 10%);
  --color-text-base: hsl(210, 44%, 10%);
  --color-text-muted: hsla(210, 44%, 10%, 0.7);
  --color-text-subtle: hsla(210, 44%, 10%, 0.5);

  /* Accent - Brand Color (darker for light bg) */
  --color-secondary: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand, 40%));
  --color-secondary-hover: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-hover, 35%));
  --color-secondary-active: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-active, 30%));
  --color-text-secondary: hsl(var(--hue-brand), var(--saturation-brand), 35%);

  /* Borders */
  --color-border-base: hsla(210, 20%, 50%, 0.2);
  --color-border-muted: hsla(210, 20%, 50%, 0.1);
  --color-border-strong: hsla(210, 20%, 50%, 0.3);
  --color-border-accent: hsl(var(--hue-brand), var(--saturation-brand), 40%);

  /* Semantic Colors — intentionally hardcoded (decoupled from brand hue, darker for light bg) */
  --color-success: hsl(142, 71%, 35%);
  --color-warning: hsl(45, 100%, 40%);
  --color-error: hsl(354, 70%, 45%);
  --color-info: hsl(210, 70%, 40%);

  /* Note Level Colors */
  --color-note-info-bg: hsla(210, 70%, 50%, 0.60);
  --color-note-info-border: hsl(210, 70%, 40%);
  --color-note-info-text: hsl(0, 0%, 100%);

  --color-note-warning-bg: hsla(45, 100%, 51%, 0.60);
  --color-note-warning-border: hsl(45, 100%, 40%);
  --color-note-warning-text: hsl(45, 100%, 25%);

  --color-note-critical-bg: hsla(354, 70%, 54%, 0.60);
  --color-note-critical-border: hsl(354, 70%, 45%);
  --color-note-critical-text: hsl(354, 70%, 35%);

  --color-note-quality-bg: hsla(142, 71%, 45%, 0.60);
  --color-note-quality-border: hsl(142, 71%, 35%);
  --color-note-quality-text: hsl(142, 71%, 25%);

  /* Shadows (lighter) */
  --shadow-sm: 0 0.0625rem 0.125rem hsla(0, 0%, 0%, 0.05);
  --shadow-md: 0 0.25rem 0.375rem hsla(0, 0%, 0%, 0.1);
  --shadow-lg: 0 0.625rem 0.9375rem hsla(0, 0%, 0%, 0.15);

  /* Video Player */
  --color-video-controls-bg: hsla(0, 0%, 100%, 0.95);
  --color-video-progress-bg: hsla(0, 0%, 0%, 0.1);
  --color-video-progress-fill: hsl(var(--hue-brand), var(--saturation-brand), 40%);

  /* Item States (darker on hover for light theme) */
  --item-bg: hsl(210, 15%, 95%);
  --item-bg-hover: hsl(210, 15%, 90%);
  --item-bg-selected: hsl(210, 15%, 85%);
  --item-bg-active: hsl(210, 15%, 77%);

  /* Accent Item States - uses dynamic lightness variants from JS for adaptive direction */
  /* Fallbacks: 42%/37%/32%/27% for light theme (darker on hover) */
  --lightness-brand-hover: 37%;
  --lightness-brand-selected: 32%;
  --lightness-brand-active: 27%;
  --color-accent-text: hsl(0, 0%, 100%);  /* White text for light theme's darker accent bg */

  --item-accent-bg: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand, 42%));
  --item-accent-bg-hover: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-hover));
  --item-accent-bg-selected: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-selected));
  --item-accent-bg-active: hsl(var(--hue-brand), var(--saturation-brand), var(--lightness-brand-active));
}

/* ============================================
   SHARED STYLES
   ============================================ */

.instruction-view-container {
  /* Font Settings */
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

/* Large text mode — scales all rem/em-based text for workshop screens */
.instruction-view-container.instruction-text-large {
  font-size: 1.25rem;

  /* Scrollbar */
  scrollbar-width: thin;
  scrollbar-color: var(--color-border-strong) transparent;
}

.instruction-view-container::-webkit-scrollbar {
  width: 0.5rem;
  height: 0.5rem;
}

.instruction-view-container::-webkit-scrollbar-track {
  background: transparent;
}

.instruction-view-container::-webkit-scrollbar-thumb {
  background: var(--color-border-strong);
  border-radius: 9999px;
}

.instruction-view-container::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-subtle);
}
